{% extends "base.html" %}
{% block content %}
<div class="container-lg">

    <!-- HERO HEADER -->
    <div class="profile-hero mb-4" style="background: linear-gradient(90deg, #72d4fc55 60%, #fff0 100%); border-radius: 1.4rem; margin-top: 2rem; padding: 1.5rem 2.7rem; display: flex; align-items: center; gap: 2.3rem;">
        <div class="avatar" style="width: 84px; height: 84px; border-radius: 50%; background: #56C2FF; color: #fff; font-size: 2.5rem; font-weight: 900; display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 24px #bdefff85; flex-shrink: 0;">
            {{ current_user.username[:2].upper() }}
        </div>
        <div>
            <div class="profile-title" style="font-size: 2rem; font-weight: bold;">{{ current_user.username }}'s Profile</div>
            <div class="text-muted" style="font-size:1.07rem;">Welcome to your smart learning HQ. All your notes and quiz stats live here.</div>
        </div>
        <div style="margin-left:auto;">
            <a href="{{ url_for('profile') }}" class="btn btn-outline-info btn-sm"><i class="bi bi-pencil"></i> Edit Profile</a>
        </div>
    </div>

    <!-- PROFILE STATS ROW -->
    <div class="row mb-4 profile-meta">
        <div class="col-md-3 mb-2">
            <div class="stat-card text-center p-3 shadow-sm bg-white" style="border-radius:13px;">
                <div style="font-size:2rem; color:#ff9100;">ğŸ”¥</div>
                <div class="stat-label" style="font-weight:600;">Streak</div>
                <div class="stat-value" style="font-size:1.18rem;">4 days</div>
            </div>
        </div>
        <div class="col-md-3 mb-2">
            <div class="stat-card text-center p-3 shadow-sm bg-white" style="border-radius:13px;">
                <div style="font-size:2rem; color:#209fff">ğŸ“Š</div>
                <div class="stat-label" style="font-weight:600;">Average Score</div>
                <div class="stat-value" style="font-size:1.18rem;">87%</div>
            </div>
        </div>
        <div class="col-md-3 mb-2">
            <div class="stat-card text-center p-3 shadow-sm bg-white" style="border-radius:13px;">
                <div style="font-size:2rem; color:#00b869;">ğŸ“</div>
                <div class="stat-label" style="font-weight:600;">Total Notes</div>
                <div class="stat-value" style="font-size:1.18rem;">{{ notes|length }}</div>
            </div>
        </div>
        <div class="col-md-3 mb-2">
            <div class="stat-card text-center p-3 shadow-sm bg-white" style="border-radius:13px;">
                <div style="font-size:2rem; color:#9d29bc;">ğŸ†</div>
                <div class="stat-label" style="font-weight:600;">Achievements</div>
                <div class="stat-value" style="font-size:1.18rem;">
                    <span class="badge rounded-pill bg-info text-dark">Quiz Star</span>
                </div>
            </div>
        </div>
    </div>

    <!-- GOAL TRACKER EXAMPLE -->
    <div class="mb-4 p-3 bg-light" style="border-radius: 12px; box-shadow:0 1px 6px #bbeaff40;">
        <div style="font-weight:500;">
            ğŸ¯ <b>Goal tracker:</b>
            <span class="text-muted">Finish 3 new quizzes this week!</span>
        </div>
        <div class="progress my-2" style="height:10px;">
            <div class="progress-bar" style="width:66%; background: linear-gradient(90deg, #c2ed64cc 30%, #45fceecc 100%);"></div>
        </div>
        <div class="small text-muted">2 / 3 completed</div>
    </div>

    <!-- ACTIVITY CALENDAR PLACEHOLDER -->
    <div class="mb-4">
        <h6 style="font-weight:bold;font-size:1.11rem;margin-bottom:.7rem;">Your Activity Calendar <span style="font-size:1.39rem;">ğŸ“…</span></h6>
        <div style="padding: 25px; border-radius: 12px; background: #f8fcff; color:#bbb; text-align:center;">
            (Coming soon: Graph of your activity streak and learning days)
        </div>
    </div>


    <!-- Notes Section -->
    <div class="notes-section">
        <div class="section-label" style="font-weight:bold;font-size:1.13rem;margin-bottom:.7rem;">Your Notes</div>
        {% if notes %}
            {% for note in notes %}
                <div class="card-note" style="border-radius:11px;margin-bottom:1.2rem;background:#fff;box-shadow:0 2px 12px #e8e9ef2b;padding:1rem 1.3rem;font-size:1.04rem;">
                    <div>{{ note.text or "(blank)" }}</div>
                    <div class="chapter" style="color:#29a0d5;font-weight:600;font-size:.99rem;">â€” {{ note.chapter.name if note.chapter else "" }}</div>
                </div>
            {% endfor %}
        {% else %}
            <div class="no-data" style="color:#aaa; margin-left:.12rem;">No notes yet. Add notes while studying chapters!</div>
        {% endif %}
    </div>

    <!-- Quiz Results Section -->
    <div class="quiz-section">
        <div class="section-label mt-4" style="font-weight:bold;font-size:1.13rem;margin-bottom:.7rem;">Your Quiz Results</div>
        {% if quiz_results %}
            {% for qr in quiz_results %}
                <div class="card-quiz mb-2" style="border-radius:11px; background:#f6fcfe; border: 1.4px solid #d1f0fb; padding:.8rem 1.3rem;">
                    <div>
                        <span class="chapter" style="color:#29a0d5;font-weight:600;font-size:.99rem;">
                            {{ qr.chapter.name if qr.chapter else "Chapter " ~ qr.chapter_id }}
                        </span>: <strong>{{ qr.score }}</strong> points
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="no-data" style="color:#aaa; margin-left:.12rem;">No quizzes taken yet.</div>
        {% endif %}
    </div>
</div>
{% endblock %}
