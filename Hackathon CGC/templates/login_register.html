<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login/Register | KisanSeva</title>
  <style>
    html, body {
      height: 100%;
      width: 100vw;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #e5eddc;
      box-sizing: border-box;
    }
    body {
      min-height: 100vh;
      min-width: 100vw;
      overflow-x: hidden;
    }
    .split-container {
      display: grid;
      grid-template-columns: 1fr 2fr;
      height: 100vh;
      width: 100vw;
      box-shadow: 0 6px 38px rgba(35,60,20,0.13);
    }
    .left-panel, .right-panel {
      min-width: 0;
      min-height: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .left-panel {
      background: rgba(255,255,255,0.26);
      backdrop-filter: blur(16px) saturate(120%);
      -webkit-backdrop-filter: blur(16px) saturate(120%);
      border-right: 2px solid #96c98e33;
      box-shadow: 13px 0 32px 0 rgba(44,80,30,0.08) inset;
    }
    .left-inner {
      width: 93%;
      max-width: 410px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      text-align: center;
      padding: 2.2em 0;
    }
    .accent-bar {
      width: 44px;
      height: 5px;
      border-radius: 3px;
      background: linear-gradient(90deg, #3fa841 0%, #b8e46b 100%);
      margin-bottom: 1em;
    }
    .emoji-logo {
      font-size: 3.1em;
      background: #ffffffbb;
      width: 82px;
      height: 82px;
      border-radius: 50%;
      box-shadow: 0 2.5px 16px rgba(70,160,75,0.12);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 0.02em;
      margin-top: -0.3em;
      border: 2.5px solid #bdf5bc33;
      text-shadow: 0 2px 16px #c9ebc23e, 0 1px 2px #cddfa7c0;
      transition: transform 0.22s cubic-bezier(.34,1.56,.64,1);
      cursor: pointer;
    }
    .emoji-logo:hover { transform: scale(1.11) rotate(-6deg);}
    .hello-farmer {
      color: #53b125;
      font-weight: 700;
      font-size: 1.17em;
      margin-bottom: 0.12em;
      margin-top: 0.15em;
      letter-spacing: 0.1px;
    }
    h2 {
      font-size: 2.13em;
      font-weight: 800;
      color: #227020;
      margin: 0 0 0.22em 0;
      text-align: center;
      letter-spacing: -1.5px;
      text-shadow: 0 2px 12px rgba(180,240,160,0.11), 0 2px 0 #fff;
      transition: color 0.15s;
    }
    .personalize {
      font-size: 1.09em; color: #56ab52; font-weight: 700;
      line-height: 1.1; margin-bottom: 0.1em;
      letter-spacing: 0.5px; text-shadow: 0 2px 8px #dcefd4;
    }
    .desc {
      font-size: 1.17em;
      color: #34603e;
      font-weight: 500;
      margin-bottom: 0.6em;
      line-height: 1.48;
      margin-top: 0.3em;
      text-shadow: 0 2px 6px #f8faf557;
    }
    .avatar-row {
      display: flex;
      gap: 1em;
      margin: 0.7em 0 1.77em 0;
      justify-content: center;
    }
    .avatar-row img {
      width: 52.5px; height: 51.5px; border-radius: 50%; object-fit: cover;
      border: 2.6px solid #c4e5c0; background: #f3fbe8;
      box-shadow: 0 1.5px 10px rgba(70,110,37,0.08);
      transition: transform 0.17s;
      cursor: pointer;
    }
    .avatar-row img:hover { transform: scale(1.13);}
    #auth-form {
      margin-bottom: 1.5em;
      width: 100%;
      margin-top: 0.3em;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 30px;
      animation: slidein 0.31s;
    }
    .login-inline-form {
      border-radius: 22px;
      background: linear-gradient(120deg, #f5fff3 70%, #e2ffd4 100%);
      box-shadow: 0 8px 32px #7bd5991e, 0 2px 10px #c7f1d677;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2.1em 1.5em 1.4em 1.5em;
      min-width: 240px;
      width: 94%;
      max-width: 340px;
      border: 1.8px solid #ace6b87a;
      animation: modalFormUp 0.33s cubic-bezier(.44,1.47,.52,1.01);
      /* subtle glassy effect */
      backdrop-filter: blur(2px) saturate(115%);
      -webkit-backdrop-filter: blur(2px) saturate(115%);
      position: relative;
    }
    @keyframes modalFormUp {
      from {transform: scale(0.94) translateY(44px); opacity: 0;}
      to {transform: scale(1) translateY(0); opacity: 1;}
    }
    .login-inline-form::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 22px;
      z-index: 0;
      pointer-events: none;
      box-shadow: 0 4px 24px #b6ebc661 inset;
      opacity: 0.21;
    }

    .login-inline-form input[type="text"],
    .login-inline-form input[type="password"],
    .login-inline-form input[type="email"] {
      margin-bottom: 1em;
      font-size: 1.08em;
      width: 97%;
      padding: 0.72em 1em 0.72em 1em;
      border-radius: 9px;
      border: 1.3px solid #b6e4be;
      background: #f7fff7;
      transition: border 0.18s, box-shadow 0.17s, background 0.14s;
      outline: none;
      box-shadow: 0 1.5px 10px #dbf6d134;
      font-weight: 500;
      color: #215522;
      position: relative;
      z-index: 1;
      letter-spacing: 0.3px;
    }
    .login-inline-form input:focus {
      border: 2px solid #42d164;
      background: #f4fff6;
      box-shadow: 0 2px 12px #7ee57f68, 0 0 0 4px #e6fff2c9;
    }

    .login-inline-form input::placeholder {
      color: #71b889;
      font-weight: 400;
      letter-spacing: 0.1px;
      opacity: 0.85;
      font-size: 0.98em;
      font-family: inherit;
    }

    .login-inline-form button {
      width: 100%;
      background: linear-gradient(90deg, #37b854 5%, #89e78a 120%);
      color: #fff;
      font-weight: 700;
      padding: 1em 0;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      letter-spacing: 0.7px;
      font-size: 1.13em;
      margin-top: 0.3em;
      margin-bottom: 0.2em;
      box-shadow: 0 4px 14px #82e99d2c, 0 2px 4px #f2ffcd44;
      transition: background 0.17s, box-shadow 0.17s, filter 0.15s;
      outline: none;
      position: relative;
      z-index: 2;
    }
    .login-inline-form button:hover,
    .login-inline-form button:focus {
      background: linear-gradient(90deg, #168d3a 0%, #69d662 90%);
      color: #f5fff5;
      box-shadow: 0 0 0 4px #adf6be4f, 0 2px 13px #aee9be9e;
      filter: brightness(1.11);
      outline: none;
    }
    .login-inline-form .cancel-link {
      margin-top: 0.75em;
      font-size: 0.99em;
      text-align: center;
      display: block;
    }
    .login-inline-form .cancel-link a {
      color: #226b20;
      text-decoration: underline;
      cursor: pointer;
      font-weight: 500;
      padding: 2.5px 5px;
      border-radius: 7px;
      transition: color 0.12s, background 0.14s;
    }
    .login-inline-form .cancel-link a:hover,
    .login-inline-form .cancel-link a:focus {
      color: #238e2d;
      background: #eaffec;
    }
    .success-message {
      background: #e9ffe8;
      color: #267a21;
      font-size: 1.07em;
      font-weight: 700;
      border-radius: 11px;
      margin: 0.7em 0 0.5em 0;
      padding: 1em 1.3em;
      border: 1.3px solid #92feae;
      box-shadow: 0 2.5px 8px #83d07925;
    }
    .error-message {
      background: #ffe8e8;
      color: #a22121;
      border: 1.3px solid #fda1a1;
      font-size: 1.07em;
      font-weight: 700;
      border-radius: 11px;
      margin: 0.7em 0 0.5em 0;
      padding: 1em 1.3em;
      box-shadow: 0 2.5px 8px #e9858523;
    }
    .btn {
      display: block;
      width: 100%;
      background: linear-gradient(90deg, #29591e 0%, #4b872e 65%, #7ab74a 100%);
      color: #fff;
      font-size: 1.18em;
      font-weight: 700;
      border: none;
      border-radius: 35px;
      padding: 1.05em 0;
      margin-bottom: 1.11em;
      text-align: center;
      text-decoration: none;
      box-shadow: 0 8px 22px #234a161f, 0 2px 8px #fff1;
      cursor: pointer;
      transition: background 0.18s, box-shadow 0.16s, filter 0.12s;
      filter: blur(0.01px);
      outline: none;
    }
    .btn:active,
    .btn:focus {
      filter: brightness(1.12) drop-shadow(0 0 9px #b5edce89);
      outline: 3px solid #5dd372;
    }
    .btn:hover {
      background: #1f670a;
      color: #edf7ee;
      box-shadow: 0 0 0 4px #b6edc5b9,0 2px 13px #aee9be38;
      filter: brightness(1.05);
    }
    .guest-link {
      margin-top: 1.15em;
      color: #267136;
      text-decoration: underline;
      font-size: 1.09em;
      font-weight: 600;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      transition: color 0.15s;
      outline: none;
    }
    .guest-link:hover { color: #1f7a2b; }
    .guest-link:focus { outline: 3px solid #80d29e; }
    .testimonial {
      margin-top: 2em;
      color: #285123;
      background: rgba(195,230,183, 0.97);
      border-left: 4.5px solid #7dcc68;
      padding: 0.95em 1em 0.95em 1.16em;
      border-radius: 0 16px 16px 0;
      font-size: 1em;
      font-style: italic;
      box-shadow: 0 1.5px 9px rgba(32,90,40,0.05);
      text-align: left;
      max-width: 340px;
      text-shadow: 0 2px 7px #fff9;
    }
    .trust-badge {
      margin-top: 2.05em;
      margin-bottom: -0.5em;
      font-weight: 700;
      background: #e8ffe1;
      color: #32890f;
      border-radius: 12px;
      box-shadow: 0 1px 7px #76e99e1c;
      padding: 0.56em 1.2em 0.53em 1.08em;
      font-size: 1.01em;
      letter-spacing: 0.4px;
      display: inline-block;
    }
    .app-row {
      display: flex;
      justify-content: center;
      gap: 0.8em;
      margin-top: 1.4em;
    }
    .store-badge {
      background: #fff;
      border-radius: 10px;
      padding: 0.2em 0.8em;
      display: flex;
      align-items: center;
      box-shadow: 0 3px 9px #6ef8401c;
      transition: box-shadow 0.17s;
      filter: grayscale(0.12);
      height: 34px;
    }
    .store-badge:hover {
      box-shadow: 0 0 0 2.5px #3fac8b3d;
      filter: grayscale(0);
    }
    .right-panel {
      background: url('/static/uploads/farmH1.jpg') center center/cover no-repeat;
      position: relative;
      min-width: 340px;
      min-height: 320px;
      display: flex;
      align-items: flex-start;
      justify-content: flex-start;
      overflow: hidden;
    }
    .right-panel::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, rgba(34,56,10,0.18) 0 60%,rgba(80,120,40,0.18) 100%);
      z-index: 0;
      pointer-events: none;
    }
    .hero-headline {
      position: absolute;
      left: 7.5%;
      top: 8%;
      font-size: 3.84em;
      font-weight: 900;
      color: #fff;
      text-transform: uppercase;
      line-height: 1.05;
      max-width: 600px;
      z-index: 2;
      letter-spacing: -1.8px;
      text-shadow: 0 7px 25px rgba(10,24,0,0.30), 0 2px 9px #001b;
    }
    .hero-info-bottom {
      position: absolute;
      right: 6.5%;
      bottom: 7%;
      text-align: right;
      max-width: 440px;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }
    .hero-mid {
      font-size: 1.8em;
      font-weight: 800;
      color: #d2ffc9;
      text-shadow: 0 4px 14px #173905cc, 0 1px 9px #0028;
      letter-spacing: 1.1px;
      margin-bottom: 1.1em;
      white-space: nowrap;
    }
    .hero-sub {
      font-size: 1.47em;
      font-weight: 600;
      color: #f7fff5;
      text-shadow: 0 1px 6px #0017, 0 2px 8px #000b;
      line-height: 1.46;
    }
    @keyframes slidein {
      from {transform: translateY(46px); opacity:0.1;}
      to {transform: translateY(0); opacity:1;}
    }
    @media (max-width: 900px) {
      .split-container { display: flex; flex-direction: column; height: auto; min-height: 100vh;}
      .left-panel, .right-panel { height: 50vh; min-height: 310px; }
      .left-inner { max-width: 91vw; }
      .testimonial { max-width: 95%; }
      .hero-headline { font-size: 2.1em; left: 4%; top: 7%; }
      .hero-info-bottom { right: 3%; bottom: 5%; }
      .hero-mid { font-size: 1em; }
      .right-panel { min-width: unset; }
    }
  </style>
</head>
<body>
  <div class="split-container">
    <div class="left-panel">
      <div class="left-inner">
        <div class="accent-bar"></div>
        <div class="emoji-logo" title="KisanSeva">üåæ</div>
        <div class="personalize" id="personal-greeting"></div>
        <div class="hello-farmer">Hello Farmer!</div>
        <h2>Welcome to KisanSeva</h2>
        <div class="desc">
          Manage your farm better --- access tools, track orders, and connect with other farmers.
        </div>
        <div class="avatar-row">
          <img src="/static/maninder.jpg" alt="Farmer Maninder" />
          <img src="/static/najar.jpg" alt="Farmer Najar" />
          <img src="https://images.unsplash.com/photo-1710170909047-135c7a010e41?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=687" alt="farmer" />
        </div>
        <div id="auth-form" style="display:none;"></div>
        <a href="/login" class="btn" id="login-btn">Login</a>
        <a href="/register" class="btn" id="register-btn">Register</a>
        <a href="/" class="guest-link"
           onclick="localStorage.removeItem('kisan_username'); document.getElementById('personal-greeting').textContent = ''; ">Continue
          as Guest</a>
        <div class="app-row">
          <div class="store-badge"><img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" height="28" alt="Google Play" /></div>
          <div class="store-badge"><img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Download_on_the_App_Store_Badge.svg" height="28" alt="App Store" /></div>
        </div>
        <span class="trust-badge">Certified Agro-Trusted | 2025 ‚úÖ</span>
        <div class="testimonial">
          ‚ÄúKisanSeva helped me cut costs and improve yield. Trusted by 10,000+ Indian farmers!‚Äù
        </div>
      </div>
    </div>
    <div class="right-panel">
      <div class="hero-headline">
        Innovative<br>Agro Tech<br>by KisanSeva
      </div>
      <div class="hero-info-bottom">
        <div class="hero-mid">
          Smart Tech &bull; Trusted &bull; Indian Innovation
        </div>
        <div class="hero-sub">
          We are driving the future of farming with advanced machinery and automation to maximize yield and sustainability.
        </div>
      </div>
    </div>
  </div>
  <script>
    // Simple user database using localStorage
    function getUserDB() {
      let db = localStorage.getItem("kisan_user_db");
      return db ? JSON.parse(db) : {};
    }
    function setUserDB(db) {
      localStorage.setItem("kisan_user_db", JSON.stringify(db));
    }

    function renderForm(type) {
      const form = document.getElementById('auth-form');
      form.innerHTML = `
        <form class="login-inline-form" id="main-auth-form" autocomplete="off">
          <input type="text" name="name" placeholder="Your Name" required>
          <input type="password" name="pass" placeholder="Password" required>
          ${type==='register' ? '<input type="email" name="email" placeholder="Email (optional)">' : ''}
          <button type="submit">${type==="login" ? "Login" : "Register"}</button>
          <div class="cancel-link"><a href="#" onclick="document.getElementById('auth-form').style.display='none';return false;">Cancel</a></div>
        </form>
      `;
      form.style.display = "flex";
      document.getElementById('main-auth-form').onsubmit = function(e){
        e.preventDefault();
        const iname = this.elements['name'].value.trim();
        const ipass = this.elements['pass'].value.trim();
        let db = getUserDB();
        if (type === "register") {
          if (db[iname]) {
            form.innerHTML = `<div class="error-message">Username already registered. Try Login or use another name.</div>`;
            setTimeout(()=>{form.style.display='none';}, 2000);
            return;
          }
          db[iname] = {password: ipass};
          setUserDB(db);
          localStorage.setItem("kisan_username", iname);
          form.innerHTML = `<div class="success-message">Thank you for registering, <b>${iname}</b>! ‚úî</div>`;
          setTimeout(()=>{ window.location.href="/"; }, 1200);
        } else {
          if (!db[iname] || db[iname].password !== ipass) {
            form.innerHTML = `<div class="error-message">Invalid login. Please try again or register.</div>`;
            setTimeout(()=>{form.style.display='none';}, 2000);
            return;
          }
          localStorage.setItem("kisan_username", iname);
          form.innerHTML = `<div class="success-message">Welcome back, <b>${iname}</b>! ‚úî</div>`;
          setTimeout(()=>{ window.location.href="/"; }, 1200);
        }
      }
    }

    document.getElementById('login-btn').onclick = function(e){e.preventDefault(); renderForm("login");};
    document.getElementById('register-btn').onclick = function(e){e.preventDefault(); renderForm("register");};
  </script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const username = localStorage.getItem('kisan_username');
    const greeting = document.getElementById('personal-greeting');
    const loginBtn = document.getElementById('login-btn');
    const registerBtn = document.getElementById('register-btn');

    if (username) {
      greeting.textContent = 'Welcome, ' + username + '! üëã';
      // Hide login/register buttons
      if (loginBtn) loginBtn.style.display = 'none';
      if (registerBtn) registerBtn.style.display = 'none';
    } else {
      greeting.textContent = '';
      if (loginBtn) loginBtn.style.display = 'inline-block';
      if (registerBtn) registerBtn.style.display = 'inline-block';
    }
  });
</script>

</body>
</html>